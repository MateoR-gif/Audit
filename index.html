<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MR Audit</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Tailwind Violet & Gray -->
    <!-- Application Structure Plan: He diseñado esta aplicación como una guía interactiva para la ejecución de auditorías. La estructura principal consiste en una barra de navegación superior que permite seleccionar la fase de la metodología. Al seleccionar una fase, el contenido principal se actualiza dinámicamente para mostrar una descripción de la fase y, mediante pestañas, los riesgos presuntos (estáticos por área) y el enfoque de auditoría específico (dinámico por fase y área). Al hacer clic en un riesgo presunto, se muestra un detalle y un caso de ejemplo de dicho riesgo. Este diseño unifica la metodología con las áreas clave, permitiendo una consulta rápida y contextualizada durante la ejecución de la auditoría, con un enfoque en la profundidad del entendimiento de los riesgos. Se ha priorizado la claridad, la organización y la adaptabilidad a cualquier dispositivo. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Fases de Metodología -> Goal: Organizar y Navegar -> Viz/Presentation: Botones de selección de fase (HTML/CSS/JS) -> Interaction: Clic para cargar contenido dinámico -> Justification: Permite al usuario seleccionar rápidamente la fase actual y obtener información relevante.
        - Report Info: Contenido por Fase y Área -> Goal: Informar y Guiar -> Viz/Presentation: Pestañas para áreas (HTML/CSS/JS) con listas de riesgos y enfoques (HTML/CSS) -> Interaction: Clic en pestañas para cambiar entre áreas de gestión.
        - Report Info: Riesgos Presuntos (Detalle) -> Goal: Informar en profundidad -> Viz/Presentation: Lista de riesgos clicables (HTML/CSS/JS) con un panel de detalle dinámico (HTML/CSS) -> Interaction: Clic en un riesgo para mostrar su descripción detallada y ejemplo -> Justification: Proporciona un nivel granular de detalle sobre cada riesgo, crucial para la ejecución de la auditoría.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff; /* white */
            color: #374151; /* gray-700 */
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
            border-bottom: 2px solid transparent;
        }
        .nav-link:hover, .nav-link.active {
            color: #7c3aed; /* violet-600 */
            border-bottom-color: #7c3aed; /* violet-600 */
        }
        .phase-button {
            transition: all 0.3s;
            border: 1px solid #e5e7eb; /* gray-200 */
        }
        .phase-button.active {
            background-color: #7c3aed; /* violet-600 */
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            border-color: #7c3aed;
        }
        .tab-button {
            transition: all 0.3s;
        }
        .tab-button.active {
            background-color: #7c3aed; /* violet-600 */
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .risk-item {
            cursor: pointer;
            transition: background-color 0.2s;
            padding: 4px 8px; /* Add some padding for better clickability */
            border-radius: 4px; /* Slightly rounded corners */
        }
        .risk-item:hover {
            background-color: #f3f4f6; /* gray-100 */
        }
        .risk-item.selected {
            background-color: #ede9fe; /* violet-100 */
            font-weight: 500;
            color: #7c3aed;
        }
        /* Styles for the light theme, now default */
        .bg-white {
            background-color: #ffffff; /* white */
            border-color: #e5e7eb; /* gray-200 */
        }
        .text-slate-800 {
            color: #1f2937; /* gray-900 */
        }
        .text-slate-700 {
            color: #374151; /* gray-700 */
        }
        .text-slate-600 {
            color: #4b5563; /* gray-600 */
        }
        .bg-slate-200 {
            background-color: #e5e7eb; /* gray-200 */
        }
        .bg-violet-100 {
            background-color: #ede9fe; /* violet-100 */
            color: #7c3aed; /* violet-600 */
        }
        .bg-violet-200 {
            background-color: #ddd6fe; /* violet-200 */
        }
        .bg-slate-100 {
            background-color: #f3f4f6; /* gray-100 */
            border-color: #d1d5db; /* gray-300 */
            color: #374151; /* gray-700 */
        }
        .shadow-sm {
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        .shadow-md {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .shadow-lg {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
        .shadow-xl {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }
        .bg-white\/80 {
            background-color: rgba(255, 255, 255, 0.8); /* white with transparency */
        }

        /* Responsive adjustments for text and buttons */
        @media (max-width: 767px) {
            h1 {
                font-size: 1.25rem; /* text-xl */
            }
            h2 {
                font-size: 1.875rem; /* text-3xl */
            }
            h3 {
                font-size: 1.5rem; /* text-2xl */
            }
            h4 {
                font-size: 1.125rem; /* text-lg */
            }
            p, li {
                font-size: 0.875rem; /* text-sm */
            }
            .phase-button, .tab-button {
                padding: 0.5rem 0.75rem; /* px-3 py-2 */
                font-size: 0.75rem; /* text-xs */
            }
            .flex-wrap {
                flex-wrap: wrap;
            }
            .gap-4 {
                gap: 0.75rem; /* reduced gap for smaller screens */
            }
            .gap-2 {
                gap: 0.5rem; /* reduced gap for smaller screens */
            }
            .md\:grid-cols-2 {
                grid-template-columns: 1fr; /* Stack columns on small screens */
            }
            .md\:px-10 {
                padding-left: 1.5rem; /* px-6 */
                padding-right: 1.5rem; /* px-6 */
            }
        }
    </style>
</head>
<body class="text-gray-700">

    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold text-violet-700">MR</h1>
            <div class="hidden md:flex space-x-8 items-center">
                <a href="#audit-guide" class="nav-link font-medium pb-1 active">Inicio</a>
            </div>
            <div class="md:hidden flex items-center">
                <select id="mobile-nav" class="bg-gray-100 border border-gray-300 rounded-md p-2 text-gray-700">
                    <option value="#audit-guide">Inicio</option>
                </select>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-8 md:py-16">

        <section id="audit-guide" class="mb-20 md:mb-28">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">Guía de Auditoría</h2>
                <p class="max-w-2xl mx-auto text-lg text-gray-700">
                   La presente herramienta fue diseñada a partir de mi experiencia como auditor independiente. Contiene información sobre los riesgos presuntos
                   que deberían ser abordados por los controles generales de tecnología de información.
                </p>
                <br>
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">Fases Clave</h2>
            </div>
                
            <div class="flex flex-wrap justify-center gap-4 mb-12">
                
                <button class="phase-button px-4 py-2 md:px-6 md:py-2.5 rounded-full font-medium text-sm md:text-base active" data-phase="planeacion">1. Planeación</button>
                <button class="phase-button px-4 py-2 md:px-6 md:py-2.5 rounded-full font-medium text-sm md:text-base" data-phase="recorrido_controles">2. Recorrido a los Controles</button>
                <button class="phase-button px-4 py-2 md:px-6 md:py-2.5 rounded-full font-medium text-sm md:text-base" data-phase="pruebas_operativas">3. Pruebas Operativas</button>
                <button class="phase-button px-4 py-2 md:px-6 md:py-2.5 rounded-full font-medium text-sm md:text-base" data-phase="actualizacion_fin_de_ano">4. Actualización de Fin de Año</button>
                <button class="phase-button px-4 py-2 md:px-6 md:py-2.5 rounded-full font-medium text-sm md:text-base" data-phase="reporte">5. Reporte</button>
                <button class="phase-button px-4 py-2 md:px-6 md:py-2.5 rounded-full font-medium text-sm md:text-base" data-phase="seguimiento">6. Seguimiento</button>
            </div>

            <div class="bg-white p-6 md:p-10 rounded-2xl shadow-xl border border-gray-200">
                <h3 id="phase-title" class="text-2xl font-bold text-gray-800 mb-4"></h3>
                <p id="phase-description" class="text-gray-600 mb-6"></p>

                <div class="flex justify-center mb-8">
                    <div class="bg-gray-200 p-1.5 rounded-full flex flex-wrap justify-center gap-2">
                        <button class="tab-button active px-4 py-2 md:px-6 md:py-2.5 rounded-full font-medium text-sm md:text-base" data-tab="access">Gestión de Accesos</button>
                        <button class="tab-button px-4 py-2 md:px-6 md:py-2.5 rounded-full font-medium text-sm md:text-base" data-tab="changes">Gestión de Cambios</button>
                        <button class="tab-button px-4 py-2 md:px-6 md:py-2.5 rounded-full font-medium text-sm md:text-base" data-tab="operations">Gestión de Operaciones</button>
                    </div>
                </div>

                <div id="area-content-container">
                    <div id="access-content" class="area-content grid md:grid-cols-2 gap-8 items-start">
                        <div>
                            <h4 class="text-xl font-semibold text-gray-800 mt-6 mb-2">Riesgos Presuntos:</h4>

                            <div class="mb-6">
                                <h5 class="text-lg font-semibold text-violet-700 mb-2">Capa Aplicación</h5>
                                <ul id="access-application-risks" class="space-y-2 text-gray-600"></ul>
                            </div>

                            <div class="mb-6">
                                <h5 class="text-lg font-semibold text-violet-700 mb-2">Capa Sistema Operativo</h5>
                                <ul id="access-operating_system-risks" class="space-y-2 text-gray-600"></ul>
                            </div>

                            <div class="mb-6">
                                <h5 class="text-lg font-semibold text-violet-700 mb-2">Capa Redes</h5>
                                <ul id="access-network-risks" class="space-y-2 text-gray-600"></ul>
                            </div>

                            <h4 class="text-xl font-semibold text-gray-800 mt-6 mb-2">Mi Enfoque de Auditoría:</h4>
                            <ul id="access-approach" class="space-y-2 text-gray-600"></ul>
                        </div>
                        <div class="bg-gray-100 p-6 rounded-lg border border-gray-200 shadow-sm">
                            <h4 class="text-lg font-semibold text-gray-800 mb-3">Detalle del Riesgo Seleccionado:</h4>
                            <p id="risk-detail-display-access" class="text-gray-600 italic">Haz clic en un riesgo para ver más detalles y ejemplos.</p>
                        </div>
                    </div>
                    <div id="changes-content" class="area-content hidden grid md:grid-cols-2 gap-8 items-start">
                        <div>
                            <h4 class="text-xl font-semibold text-gray-800 mt-6 mb-2">Riesgos Presuntos:</h4>

                            <div class="mb-6">
                                <h5 class="text-lg font-semibold text-violet-700 mb-2">Capa Aplicación</h5>
                                <ul id="changes-application-risks" class="space-y-2 text-gray-600"></ul>
                            </div>

                            <div class="mb-6">
                                <h5 class="text-lg font-semibold text-violet-700 mb-2">Capa Sistema Operativo</h5>
                                <ul id="changes-operating_system-risks" class="space-y-2 text-gray-600"></ul>
                            </div>

                            <div class="mb-6">
                                <h5 class="text-lg font-semibold text-violet-700 mb-2">Capa Redes</h5>
                                <ul id="changes-network-risks" class="space-y-2 text-gray-600"></ul>
                            </div>

                            <h4 class="text-xl font-semibold text-gray-800 mt-6 mb-2">Mi Enfoque de Auditoría:</h4>
                            <ul id="changes-approach" class="space-y-2 text-gray-600"></ul>
                        </div>
                        <div class="bg-gray-100 p-6 rounded-lg border border-gray-200 shadow-sm">
                            <h4 class="text-lg font-semibold text-gray-800 mb-3">Detalle del Riesgo Seleccionado:</h4>
                            <p id="risk-detail-display-changes" class="text-gray-600 italic">Haz clic en un riesgo para ver más detalles y ejemplos.</p>
                        </div>
                    </div>
                    <div id="operations-content" class="area-content hidden grid md:grid-cols-2 gap-8 items-start">
                        <div>
                            <h4 class="text-xl font-semibold text-gray-800 mt-6 mb-2">Riesgos Presuntos:</h4>

                            <div class="mb-6">
                                <h5 class="text-lg font-semibold text-violet-700 mb-2">Capa Aplicación</h5>
                                <ul id="operations-application-risks" class="space-y-2 text-gray-600"></ul>
                            </div>

                            <div class="mb-6">
                                <h5 class="text-lg font-semibold text-violet-700 mb-2">Capa Sistema Operativo</h5>
                                <ul id="operations-operating_system-risks" class="space-y-2 text-gray-600"></ul>
                            </div>

                            <div class="mb-6">
                                <h5 class="text-lg font-semibold text-violet-700 mb-2">Capa Redes</h5>
                                <ul id="operations-network-risks" class="space-y-2 text-gray-600"></ul>
                            </div>

                            <h4 class="text-xl font-semibold text-gray-800 mt-6 mb-2">Mi Enfoque de Auditoría:</h4>
                            <ul id="operations-approach" class="space-y-2 text-gray-600"></ul>
                        </div>
                        <div class="bg-gray-100 p-6 rounded-lg border border-gray-200 shadow-sm">
                            <h4 class="text-lg font-semibold text-gray-800 mb-3">Detalle del Riesgo Seleccionado:</h4>
                            <p id="risk-detail-display-operations" class="text-gray-600 italic">Haz clic en un riesgo para ver más detalles y ejemplos.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-gray-300 mt-16">
        <div class="container mx-auto px-6 py-8 text-center">
            <p class="font-semibold text-lg text-white">Fortalezco la confianza a través de la auditoría.</p>
            <p class="mt-2 text-sm">Esta propuesta interactiva demuestra mi enfoque proactivo para la gestión de riesgos de TI.</p>
            <p>©MR</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Static risks data, independent of methodology phase and categorized by technology layer
            const staticRisksData = {
                "access": {
                    "application": [
                        {
                            title: "Configuraciones de seguridad (Aplicaciones/Bases de Datos) inapropiadas para limitar el acceso.",
                            detail: "Las configuraciones de seguridad clave, incluidas las contraseñas, no son apropiadas para limitar el acceso solo a los usuarios previstos. Esto incluye configuraciones a nivel de aplicación y base de datos. Por ejemplo, una aplicación con credenciales por defecto o una base de datos con permisos excesivos para usuarios genéricos."
                        },
                        {
                            title: "Solicitudes de acceso de usuarios (Aplicaciones/Bases de Datos) inapropiadas.",
                            detail: "Las peticiones de acceso a sistemas y datos, tanto para personal de TI como de negocio, pueden no estar justificadas, ser excesivas o no alinearse con el principio de mínimo privilegio. Esto puede llevar a otorgar más acceso del necesario. Por ejemplo, un usuario de negocio solicita acceso de administrador a una aplicación que solo requiere acceso de lectura."
                        },
                        {
                            title: "Acceso otorgado (Aplicaciones/Bases de Datos) no coincide con el aprobado.",
                            detail: "Existe una discrepancia entre el nivel de acceso que fue formalmente aprobado y el que realmente se configuró y otorgó al usuario en los sistemas. Esto puede resultar en privilegios excesivos o insuficientes. Un caso es cuando se aprueba un rol con permisos específicos, pero se le asigna un rol más amplio por error."
                        },
                        {
                            title: "Derechos de acceso (Aplicaciones/Bases de Datos) no terminados a tiempo.",
                            detail: "Los derechos de acceso a aplicaciones y bases de datos no son revocados oportunamente cuando un usuario cambia de rol o deja la entidad. Esto crea cuentas huérfanas o accesos persistentes que son un riesgo de seguridad. Por ejemplo, un empleado desvinculado aún puede acceder a la base de datos de clientes."
                        },
                        {
                            title: "Derechos de acceso (Aplicaciones/Bases de Datos) no permanecen apropiados.",
                            detail: "Los privilegios de acceso de los usuarios no se revisan ni ajustan periódicamente a medida que evolucionan sus roles o las necesidades del negocio, lo que puede llevar a la acumulación de accesos innecesarios o excesivos (privilege creep). Un caso común es el 'privilege creep' donde un usuario acumula permisos de varios roles a lo largo de los años."
                        },
                        {
                            title: "Permisos incluidos en roles (Aplicaciones/Bases de Datos) inapropiados.",
                            detail: "Los roles definidos en los sistemas contienen combinaciones de permisos que son excesivas, conflictivas (violando SoD) o no se alinean con las funciones de negocio esperadas para ese rol. Esto puede facilitar errores o actividades fraudulentas. Por ejemplo, un rol de 'Contador' que incluye permisos para modificar parámetros del sistema financiero."
                        },
                        {
                            title: "Solicitudes de acceso de emergencia (Aplicaciones/Bases de Datos) inapropiadas.",
                            detail: "Las solicitudes para obtener acceso de emergencia a aplicaciones o bases de datos no están debidamente justificadas por una situación crítica real, o se utilizan para eludir los controles normales. Un ejemplo es una solicitud de acceso de emergencia a la base de datos de producción para realizar una consulta rutinaria que podría haberse planificado."
                        },
                        {
                            title: "Acceso de emergencia (Aplicaciones/Bases de Datos) no revocado a tiempo.",
                            detail: "Los privilegios de acceso de emergencia a aplicaciones o bases de datos no se desactivan o revocan una vez que la situación crítica ha sido resuelta o el período de tiempo autorizado ha expirado. Esto deja una ventana de oportunidad para el abuso de privilegios. Un caso es una cuenta de 'break-glass' que permanece activa durante semanas después de un incidente."
                        },
                        {
                            title: "Uso indebido del acceso de emergencia (Aplicaciones/Bases de Datos).",
                            detail: "El acceso de emergencia a aplicaciones o bases de datos se utiliza para fines distintos a los que justificaron su activación, como realizar tareas no relacionadas con la emergencia o para acceder a información sensible sin necesidad. Esto es un indicador de control débil y posible fraude. Por ejemplo, un usuario con acceso de emergencia accede a registros de empleados no relacionados con el incidente."
                        }
                    ],
                    "operating_system": [
                        {
                            title: "Configuraciones de seguridad (Sistema Operativo) inapropiadas para limitar el acceso.",
                            detail: "Las configuraciones de seguridad clave del sistema operativo, incluidas las contraseñas de cuentas de servicio o administradores, no son apropiadas para limitar el acceso solo a los usuarios previstos. Esto puede exponer el sistema a ataques o accesos no autorizados. Por ejemplo, un servidor con políticas de contraseñas débiles o puertos de administración abiertos a la red pública."
                        },
                        {
                            title: "Solicitudes de acceso de usuarios (Sistema Operativo) inapropiadas.",
                            detail: "Las solicitudes de acceso para usuarios de TI y de negocios a componentes relevantes del sistema operativo son inapropiadas, lo que lleva a otorgar privilegios excesivos o innecesarios. Por ejemplo, un usuario de soporte solicita acceso de administrador a un servidor cuando solo necesita acceso a logs."
                        },
                        {
                            title: "Acceso otorgado (Sistema Operativo) no coincide con el aprobado.",
                            detail: "El acceso que se configura y otorga a los usuarios en el sistema operativo no es idéntico al que fue formalmente aprobado. Esto puede resultar en un exceso de privilegios o en una funcionalidad limitada. Un caso es cuando se aprueba acceso a un directorio específico, pero se otorga acceso a todo el disco por error."
                        },
                        {
                            title: "Derechos de acceso (Sistema Operativo) no terminados a tiempo.",
                            detail: "Los derechos de acceso a cuentas de sistema operativo no son revocados oportunamente cuando un usuario cambia de rol o deja la entidad. Esto crea cuentas huérfanas o accesos persistentes que son un riesgo de seguridad. Por ejemplo, un administrador de sistemas desvinculado aún tiene una cuenta activa en los servidores."
                        },
                        {
                            title: "Derechos de acceso (Sistema Operativo) no permanecen apropiados.",
                            detail: "Los privilegios de acceso de los usuarios en el sistema operativo no se revisan ni ajustan periódicamente a medida que evolucionan sus roles o las necesidades del negocio, lo que puede llevar a la acumulación de accesos innecesarios o excesivos (privilege creep). Un caso es un usuario que, tras varios cambios de puesto, mantiene permisos de administrador en servidores que ya no gestiona."
                        }
                    ],
                    "network": [
                        {
                            title: "Configuraciones de seguridad (Redes) inapropiada para limitar el acceso.",
                            detail: "Las configuraciones de seguridad clave en dispositivos de red (routers, firewalls, switches), incluidas las contraseñas y las reglas de acceso, no son apropiadas para limitar el acceso solo a los usuarios previstos o para proteger la red. Esto puede exponer la infraestructura a ataques. Por ejemplo, un firewall con reglas permisivas que exponen servicios internos a internet."
                        },
                        {
                            title: "Solicitudes de acceso de usuarios (Redes) inapropiadas.",
                            detail: "Las solicitudes de acceso para usuarios de TI y de negocios a componentes relevantes del entorno de red (ej. dispositivos de red, segmentos de red) son inapropiadas, lo que lleva a otorgar privilegios excesivos o innecesarios. Por ejemplo, un usuario de soporte solicita acceso de administrador a un router cuando solo necesita acceso de monitoreo."
                        },
                        {
                            title: "Acceso otorgado (Redes) no coincide con el aprobado.",
                            detail: "El acceso que se configura y otorga a los usuarios en dispositivos de red no es idéntico al que fue formalmente aprobado. Esto puede resultar en un exceso de privilegios o en una funcionalidad limitada. Un caso es cuando se aprueba acceso a un segmento de red específico, pero se otorga acceso a toda la red por error."
                        },
                        {
                            title: "Derechos de acceso (Redes) no terminados a tiempo.",
                            detail: "Los derechos de acceso a dispositivos de red no son revocados oportunamente cuando un usuario cambia de rol o deja la entidad. Esto crea cuentas huérfanas o accesos persistentes que son un riesgo de seguridad. Por ejemplo, un ingeniero de red desvinculado aún tiene acceso a los firewalls de la empresa."
                        },
                        {
                            title: "Derechos de acceso (Redes) no permanecen apropiados.",
                            detail: "Los privilegios de acceso de los usuarios en dispositivos de red no se revisan ni ajustan periódicamente a medida que evolucionan sus roles o las necesidades del negocio, lo que puede llevar a la acumulación de accesos innecesarios o excesivos (privilege creep). Un caso es un usuario que, tras varios cambios de puesto, mantiene permisos de configuración en routers que ya no gestiona."
                        }
                    ]
                },
                "changes": {
                    "application": [
                        {
                            title: "Cambios en programas de proveedor no funcionan como esperado.",
                            detail: "Los cambios o actualizaciones en programas de software licenciados (de terceros) no se integran o funcionan correctamente en el entorno de la entidad, causando errores o interrupciones en los sistemas. Un ejemplo es un parche de seguridad para un ERP que, al ser aplicado, provoca fallos en la generación de informes críticos."
                        },
                        {
                            title: "Cambios en programas de proveedor inapropiados para el entorno.",
                            detail: "Los cambios o nuevas versiones de software licenciado, aunque funcionales, no se alinean con los requisitos específicos del negocio o la infraestructura de TI de la entidad, generando ineficiencias o incompatibilidades. Un caso es una nueva funcionalidad que no es utilizada o que entra en conflicto con procesos internos existentes."
                        },
                        {
                            title: "Nuevos programas/cambios (incl. informes/interfaces) no funcionan como esperado.",
                            detail: "El software desarrollado internamente o las modificaciones a programas existentes (incluyendo reportes e interfaces) contienen defectos o no cumplen con los requisitos funcionales, lo que lleva a errores operativos o información incorrecta. Por ejemplo, un nuevo módulo de facturación que calcula mal los impuestos o una interfaz que no transfiere todos los datos necesarios entre sistemas."
                        },
                        {
                            title: "Nuevos programas/cambios (incl. informes/interfaces) no apropiados.",
                            detail: "El software desarrollado o modificado no se adapta adecuadamente a las necesidades del negocio o no es compatible con la infraestructura de TI existente, generando ineficiencias o problemas de rendimiento. Un caso es una interfaz que sobrecarga la base de datos o un nuevo informe que no satisface las necesidades de análisis del negocio."
                        },
                        {
                            title: "Clasificación incorrecta de cambios.",
                            detail: "Si un cambio se clasifica erróneamente (ej. como 'menor' cuando es 'crítico'), puede omitir pasos esenciales de prueba, aprobación o monitoreo, aumentando el riesgo de fallos. Por ejemplo, un cambio en la lógica de un cálculo financiero se clasifica como 'menor' y se despliega sin pruebas de regresión adecuadas."
                        },
                        {
                            title: "Desarrolladores mueven programas no autorizados/probados a producción.",
                            detail: "Existe la posibilidad de que el personal de desarrollo implemente código directamente en el ambiente de producción sin la debida autorización o sin haber pasado por las fases de prueba requeridas. Esto puede introducir vulnerabilidades o errores críticos. Un caso es un desarrollador que usa sus credenciales privilegiadas para subir un script no aprobado a un servidor de producción."
                        },
                        {
                            title: "Inconsistencia entre múltiples instancias de aplicación.",
                            detail: "Cuando una aplicación tiene varias instancias (ej. en diferentes centros de datos o para diferentes regiones), los cambios no se aplican de manera uniforme, lo que lleva a inconsistencias en la funcionalidad, seguridad o rendimiento entre ellas. Esto puede causar errores o dificultades en el soporte. Un caso es una actualización de seguridad que se aplica solo a una de las tres instancias de una aplicación, dejando las otras vulnerables."
                        }
                    ],
                    "operating_system": [
                        {
                            title: "Cambios no autorizados en configuraciones (Sistema Operativo).",
                            detail: "Las configuraciones del sistema operativo pueden establecerse o cambiarse a valores no autorizados, intencionalmente o no, y no ser detectadas ni corregidas. Esto incluye cambios en archivos de configuración críticos, permisos de sistema o servicios. Un caso sería la modificación de un parámetro de seguridad en un servidor sin un ticket de cambio aprobado."
                        }
                    ],
                    "network": [
                        {
                            title: "Cambios no autorizados en configuraciones (Redes).",
                            detail: "Las configuraciones de red pueden establecerse o cambiarse a valores no autorizados, intencionalmente o no, y no ser detectadas ni corregidas. Esto incluye cambios en reglas de firewall, configuraciones de VPN o rutas. Un caso sería la modificación de una regla de firewall crítica por un error humano, abriendo un puerto sin que el equipo de seguridad lo sepa."
                        }
                    ]
                },
                "operations": {
                    "application": [
                        {
                            title: "Programación imprecisa de Jobs.",
                            detail: "Las tareas automatizadas (jobs) no se configuran para ejecutarse en el momento correcto, con la frecuencia adecuada o con las dependencias necesarias, lo que puede causar retrasos en los procesos de negocio o errores en la información. Un ejemplo es un job de generación de reportes financieros que se programa para ejecutarse después del cierre de un sistema, resultando en datos incompletos."
                        },
                        {
                            title: "Jobs incompletos no gestionados.",
                            detail: "Cuando un job programado falla o no se completa, no se detecta a tiempo, no se investiga la causa raíz o no se toman las acciones correctivas adecuadas. Esto puede llevar a la pérdida de datos, información desactualizada o interrupciones en los procesos. Un caso es un job de carga de datos que falla a mitad de la noche, y nadie lo nota hasta que los usuarios reportan información faltante al día siguiente."
                        },
                        {
                            title: "Las interfaces que permiten transmitir la información de un sistema a otro no trabajan de manera precisa y exacta.",
                            detail: "Las interfaces son puntos críticos de integración entre sistemas. Si no funcionan correctamente, la información puede ser inconsistente, incompleta o incorrecta entre sistemas, afectando la toma de decisiones y la eficiencia operativa. Un ejemplo es una interfaz entre el sistema de ventas y el de inventario que no sincroniza los datos en tiempo real, llevando a ventas de productos agotados o a discrepancias en el inventario."
                        }
                    ],
                    "operating_system": [
                        {
                            title: "La gestión de backups es insuficiente.",
                            detail: "Una gestión de respaldos deficiente implica que los datos críticos no se copian con la frecuencia necesaria, la integridad de los respaldos no se verifica, o los procesos de recuperación son ineficaces. Esto puede llevar a la pérdida de datos irrecuperable en caso de un fallo del sistema o un desastre. Un caso es un respaldo que se ejecuta, pero al intentar restaurarlo, los datos están corruptos o incompletos, o el tiempo de recuperación excede los objetivos del negocio."
                        },
                        {
                            title: "Configuraciones de seguridad base (Sistema Operativo) inapropiadas.",
                            detail: "Las configuraciones de seguridad a nivel de sistemas operativos (ej. políticas de contraseñas de cuentas de servicio, configuraciones de puertos, reglas de firewall) no son lo suficientemente robustas para proteger los activos. Esto puede exponer la infraestructura a ataques. Por ejemplo, un servidor de base de datos con puertos abiertos innecesarios o contraseñas por defecto en servicios de red."
                        }
                    ],
                    "network": [
                        {
                            title: "Configuraciones de seguridad base (Redes) inapropiadas.",
                            detail: "Las configuraciones de seguridad a nivel de dispositivos de red (ej. políticas de contraseñas de cuentas de servicio, configuraciones de puertos, reglas de firewall) no son lo suficientemente robustas para proteger los activos. Esto puede exponer la infraestructura a ataques. Por ejemplo, un servidor de base de datos con puertos abiertos innecesarios o contraseñas por defecto en servicios de red."
                        }
                    ]
                }
            };

            // Dynamic audit guide data, where approach changes per phase and categorized by technology layer
            const auditGuideData = {
                "planeacion": {
                    title: "1. Planeación",
                    description: "En esta fase, mi objetivo es comprender el entorno, identificar los riesgos clave y definir el alcance de la auditoría para cada área.",
                    areas: {
                        "access": {
                            "application": [
                                "Revisar la documentación de políticas y procedimientos de acceso a aplicaciones y bases de datos.",
                                "Entrevistar a personal de desarrollo y negocio para entender los procesos de gestión de accesos en aplicaciones e interfaces.",
                                "Identificar aplicaciones y bases de datos críticas, sus propietarios de acceso."
                            ],
                            "operating_system": [
                                "Revisar políticas y procedimientos de seguridad de sistemas operativos relacionados con accesos.",
                                "Entrevistar a administradores de sistemas para entender la gestión de accesos en SO.",
                                "Identificar servidores críticos y sus configuraciones de acceso."
                            ],
                            "network": [
                                "Revisar políticas y procedimientos de seguridad de red relacionados con accesos.",
                                "Entrevistar a ingenieros de red para entender la gestión de accesos a dispositivos de red.",
                                "Identificar dispositivos de red críticos y sus configuraciones de acceso."
                            ]
                        },
                        "changes": {
                            "application": [
                                "Revisar la política de gestión de cambios y procedimientos asociados a aplicaciones y bases de datos.",
                                "Entrevistar a los equipos de desarrollo y negocio sobre el ciclo de vida de los cambios en aplicaciones e interfaces.",
                                "Identificar aplicaciones y bases de datos más propensas a cambios y su impacto potencial."
                            ],
                            "operating_system": [
                                "Revisar la política de gestión de cambios y procedimientos asociados a sistemas operativos.",
                                "Entrevistar a administradores de sistemas sobre el ciclo de vida de los cambios en SO.",
                                "Identificar sistemas operativos críticos y su impacto potencial de cambios."
                            ],
                            "network": [
                                "Revisar la política de gestión de cambios y procedimientos asociados a redes.",
                                "Entrevistar a ingenieros de red sobre el ciclo de vida de los cambios en dispositivos de red.",
                                "Identificar dispositivos de red críticos y su impacto potencial de cambios."
                            ]
                        },
                        "operations": {
                            "application": [
                                "Revisar políticas y procedimientos de operaciones de aplicaciones y bases de datos (jobs, interfaces).",
                                "Entrevistar a personal de operaciones para entender sus rutinas diarias y desafíos en la capa de aplicación.",
                                "Identificar los servicios críticos del negocio y su dependencia de la infraestructura de TI a nivel de aplicación."
                            ],
                            "operating_system": [
                                "Revisar políticas y procedimientos de operaciones de sistemas operativos (backups, configuraciones de seguridad).",
                                "Entrevistar a administradores de sistemas para entender la gestión de backups y configuraciones de seguridad en SO.",
                                "Identificar sistemas operativos críticos y su impacto en la continuidad del negocio."
                            ],
                            "network": [
                                "Revisar políticas y procedimientos de operaciones de red (configuraciones de seguridad).",
                                "Entrevistar a ingenieros de red para entender la gestión de configuraciones de seguridad en dispositivos de red.",
                                "Identificar dispositivos de red críticos y su impacto en la continuidad del negocio."
                            ]
                        }
                    }
                },
                "recorrido_controles": {
                    title: "2. Recorrido a los Controles",
                    description: "Aquí, mi foco es entender el diseño de los controles, documentar los procesos y verificar que los controles están implementados como se espera.",
                    areas: {
                        "access": {
                            "application": [
                                "Realizar 'walkthroughs' del proceso de alta, baja y modificación de accesos en aplicaciones y bases de datos, siguiendo una transacción de principio a fin.",
                                "Evaluar el diseño de los controles de contraseñas, autenticación y segregación de funciones (SoD) a nivel de aplicación y base de datos.",
                                "Revisar la evidencia de la implementación de la segregación de funciones (SoD) en roles clave de aplicación/BD.",
                                "Documentar los flujos de proceso y los puntos de control clave para accesos a aplicaciones/BD."
                            ],
                            "operating_system": [
                                "Realizar 'walkthroughs' del proceso de alta, baja y modificación de accesos en sistemas operativos, siguiendo una transacción de principio a fin.",
                                "Evaluar el diseño de los controles de contraseñas y autenticación a nivel de SO.",
                                "Documentar los flujos de proceso y los puntos de control clave para accesos a SO."
                            ],
                            "network": [
                                "Realizar 'walkthroughs' del proceso de alta, baja y modificación de accesos en dispositivos de red, siguiendo una transacción de principio a fin.",
                                "Evaluar el diseño de los controles de contraseñas y autenticación a nivel de red.",
                                "Documentar los flujos de proceso y los puntos de control clave para accesos a red."
                            ]
                        },
                        "changes": {
                            "application": [
                                "Realizar 'walkthroughs' del proceso de gestión de cambios en aplicaciones y bases de datos, desde la solicitud hasta el despliegue.",
                                "Evaluar el diseño de los controles de aprobación y revisión de cambios en aplicaciones e interfaces.",
                                "Verificar la existencia de entornos de desarrollo y pruebas segregados para aplicaciones y bases de datos.",
                                "Revisar ejemplos de planes de reversión y su diseño para cambios en aplicaciones."
                            ],
                            "operating_system": [
                                "Realizar 'walkthroughs' del proceso de gestión de cambios en sistemas operativos, desde la solicitud hasta el despliegue.",
                                "Evaluar el diseño de los controles de aprobación y revisión de cambios en SO.",
                                "Verificar la existencia de entornos de desarrollo y pruebas segregados para SO.",
                                "Revisar ejemplos de planes de reversión y su diseño para cambios en SO."
                            ],
                            "network": [
                                "Realizar 'walkthroughs' del proceso de gestión de cambios en dispositivos de red, desde la solicitud hasta el despliegue.",
                                "Evaluar el diseño de los controles de aprobación y revisión de cambios en red.",
                                "Verificar la existencia de entornos de desarrollo y pruebas segregados para red.",
                                "Revisar ejemplos de planes de reversión y su diseño para cambios en red."
                            ]
                        },
                        "operations": {
                            "application": [
                                "Realizar 'walkthroughs' de los procesos de ejecución de jobs e integración de interfaces a nivel de aplicación.",
                                "Evaluar el diseño de los controles de monitoreo de jobs y la verificación de integridad de las interfaces.",
                                "Revisar la documentación de diseño de las interfaces y sus especificaciones técnicas."
                            ],
                            "operating_system": [
                                "Realizar 'walkthroughs' de los procesos de respaldo y recuperación de datos a nivel de sistema operativo.",
                                "Evaluar el diseño de los controles de monitoreo de la salud del SO y la gestión de parches.",
                                "Revisar la documentación de las configuraciones de seguridad base del sistema operativo."
                            ],
                            "network": [
                                "Realizar 'walkthroughs' de los procesos de monitoreo de red y gestión de configuraciones de seguridad de red.",
                                "Evaluar el diseño de los controles de acceso a dispositivos de red y las reglas de firewall.",
                                "Revisar la documentación de las configuraciones de seguridad base de la red."
                            ]
                        }
                    }
                },
                "pruebas_operativas": {
                    title: "3. Pruebas Operativas",
                    description: "En esta fase, mi enfoque es probar la efectividad de los controles a lo largo del tiempo, utilizando muestreo y análisis de datos para verificar su funcionamiento continuo.",
                    areas: {
                        "access": {
                            "application": [
                                "Seleccionar una muestra de altas, bajas y modificaciones de acceso en aplicaciones/BD y verificar la ejecución de los controles (evidencia de aprobación, cumplimiento de plazos).",
                                "Probar la efectividad de las revisiones periódicas de acceso en aplicaciones/BD, verificando acciones correctivas.",
                                "Realizar pruebas de SoD en una muestra de usuarios para identificar conflictos operativos en la capa de aplicación/BD.",
                                "Analizar logs de acceso de aplicaciones/BD para detectar actividades inusuales o no autorizadas."
                            ],
                            "operating_system": [
                                "Seleccionar una muestra de accesos a sistemas operativos y verificar el cumplimiento de las políticas de acceso.",
                                "Probar la efectividad de las revisiones periódicas de acceso en SO, verificando acciones correctivas.",
                                "Analizar logs de acceso de SO para detectar actividades inusuales o no autorizadas."
                            ],
                            "network": [
                                "Seleccionar una muestra de accesos a dispositivos de red y verificar el cumplimiento de las políticas de acceso.",
                                "Probar la efectividad de las revisiones periódicas de acceso en red, verificando acciones correctivas.",
                                "Analizar logs de acceso de red para detectar actividades inusuales o no autorizadas."
                            ]
                        },
                        "changes": {
                            "application": [
                                "Seleccionar una muestra de cambios implementados en aplicaciones/BD/interfaces y verificar la ejecución de todos los pasos del proceso (solicitud, aprobación, pruebas, despliegue, documentación).",
                                "Analizar los incidentes de producción relacionados con cambios recientes en la capa de aplicación.",
                                "Probar la efectividad de los controles de segregación de funciones en el ciclo de desarrollo y despliegue de aplicaciones."
                            ],
                            "operating_system": [
                                "Seleccionar una muestra de cambios implementados en sistemas operativos y verificar la ejecución de todos los pasos del proceso.",
                                "Analizar los incidentes de producción relacionados con cambios recientes en SO.",
                                "Probar la efectividad de los controles de segregación de funciones en el ciclo de desarrollo y despliegue de SO."
                            ],
                            "network": [
                                "Seleccionar una muestra de cambios implementados en dispositivos de red y verificar la ejecución de todos los pasos del proceso.",
                                "Analizar los incidentes de producción relacionados con cambios recientes en red.",
                                "Probar la efectividad de los controles de segregación de funciones en el ciclo de desarrollo y despliegue de red."
                            ]
                        },
                        "operations": {
                            "application": [
                                "Revisar los logs de ejecución de jobs programados para identificar fallos y anomalías.",
                                "Analizar los logs de interfaces y realizar un muestreo de transacciones para verificar la integridad y exactitud de los datos transmitidos."
                            ],
                            "operating_system": [
                                "Verificar la existencia y resultados de las pruebas de restauración de respaldos a nivel de SO.",
                                "Verificar la aplicación de parches de seguridad en una muestra de sistemas operativos críticos.",
                                "Analizar logs de eventos de seguridad del sistema operativo para detectar actividades inusuales o no autorizadas."
                            ],
                            "network": [
                                "Realizar pruebas de penetración o escaneo de vulnerabilidades en la red para identificar configuraciones inseguras.",
                                "Analizar logs de dispositivos de red (firewalls, routers) para detectar tráfico inusual o intentos de acceso no autorizados."
                            ]
                        }
                    }
                },
                "actualizacion_fin_de_ano": {
                    title: "4. Actualización de Fin de Año",
                    description: "Esta fase se enfoca en la revisión y validación de los controles y procesos al cierre del año fiscal, asegurando que los hallazgos se integren en la planificación futura.",
                    areas: {
                        "access": {
                            "application": [
                                "Verificar la realización y documentación de las revisiones anuales de acceso a aplicaciones y bases de datos.",
                                "Revisar una muestra de accesos privilegiados activos en aplicaciones/BD para asegurar su justificación.",
                                "Confirmar la limpieza de cuentas huérfanas o inactivas en aplicaciones/BD al cierre del período."
                            ],
                            "operating_system": [
                                "Verificar la realización y documentación de las revisiones anuales de acceso a sistemas operativos.",
                                "Revisar una muestra de accesos privilegiados activos en SO para asegurar su justificación.",
                                "Confirmar la limpieza de cuentas huérfanas o inactivas en SO al cierre del período."
                            ],
                            "network": [
                                "Verificar la realización y documentación de las revisiones anuales de acceso a dispositivos de red.",
                                "Revisar una muestra de accesos privilegiados activos en red para asegurar su justificación.",
                                "Confirmar la limpieza de cuentas huérfanas o inactivas en red al cierre del período."
                            ]
                        },
                        "changes": {
                            "application": [
                                "Auditar una muestra de cambios implementados en aplicaciones/interfaces durante el período de 'freeze' de fin de año.",
                                "Revisar la documentación de los cambios mayores o críticos relacionados con el cierre fiscal en la capa de aplicación.",
                                "Confirmar la finalización de los cambios planificados para el año en aplicaciones/BD."
                            ],
                            "operating_system": [
                                "Auditar una muestra de cambios implementados en sistemas operativos durante el período de 'freeze' de fin de año.",
                                "Revisar la documentación de los cambios mayores o críticos relacionados con el cierre fiscal en SO.",
                                "Confirmar la finalización de los cambios planificados para el año en SO."
                            ],
                            "network": [
                                "Auditar una muestra de cambios implementados en dispositivos de red durante el período de 'freeze' de fin de año.",
                                "Revisar la documentación de los cambios mayores o críticos relacionados con el cierre fiscal en red.",
                                "Confirmar la finalización de los cambios planificados para el año en red."
                            ]
                        },
                        "operations": {
                            "application": [
                                "Revisar los informes de ejecución de jobs críticos de fin de año y la conciliación de datos entre sistemas interconectados por interfaces clave."
                            ],
                            "operating_system": [
                                "Verificar la integridad y el almacenamiento seguro de los respaldos de fin de año a nivel de SO.",
                                "Revisar la configuración de seguridad de los sistemas operativos para el próximo ciclo fiscal."
                            ],
                            "network": [
                                "Revisar la configuración de seguridad de los dispositivos de red para el próximo ciclo fiscal.",
                                "Verificar la integridad y el almacenamiento seguro de los respaldos de configuraciones de red de fin de año."
                            ]
                        }
                    }
                },
                "reporte": {
                    title: "5. Reporte",
                    description: "En esta fase, mi trabajo se centra en la comunicación clara y efectiva de los hallazgos de auditoría, los riesgos asociados y las recomendaciones para la mejora.",
                    areas: {
                        "access": {
                            "application": [
                                "Asegurar que los hallazgos de acceso en aplicaciones/bases de datos sean claros, concisos y basados en evidencia.",
                                "Formular recomendaciones SMART para mejorar los controles de acceso en aplicaciones y bases de datos.",
                                "Discutir los hallazgos y recomendaciones con la gerencia para obtener su acuerdo y plan de acción para la capa de aplicación."
                            ],
                            "operating_system": [
                                "Asegurar que los hallazgos de acceso en sistemas operativos sean claros, concisos y basados en evidencia.",
                                "Formular recomendaciones SMART para mejorar los controles de acceso en SO.",
                                "Discutir los hallazgos y recomendaciones con la gerencia para obtener su acuerdo y plan de acción para la capa de SO."
                            ],
                            "network": [
                                "Asegurar que los hallazgos de acceso en redes sean claros, concisos y basados en evidencia.",
                                "Formular recomendaciones SMART para mejorar los controles de acceso en red.",
                                "Discutir los hallazgos y recomendaciones con la gerencia para obtener su acuerdo y plan de acción para la capa de red."
                            ]
                        },
                        "changes": {
                            "application": [
                                "Presentar los hallazgos de cambios en aplicaciones/BD/interfaces con su causa raíz y el impacto potencial en el negocio.",
                                "Proponer recomendaciones de mejora para el proceso de gestión de cambios en la capa de aplicación.",
                                "Facilitar la creación de planes de acción detallados por parte de la gerencia para cambios en aplicaciones."
                            ],
                            "operating_system": [
                                "Presentar los hallazgos de cambios en sistemas operativos con su causa raíz y el impacto potencial en el negocio.",
                                "Proponer recomendaciones de mejora para el proceso de gestión de cambios en SO.",
                                "Facilitar la creación de planes de acción detallados por parte de la gerencia para cambios en SO."
                            ],
                            "network": [
                                "Presentar los hallazgos de cambios en redes con su causa raíz y el impacto potencial en el negocio.",
                                "Proponer recomendaciones de mejora para el proceso de gestión de cambios en red.",
                                "Facilitar la creación de planes de acción detallados por parte de la gerencia para cambios en red."
                            ]
                        },
                        "operations": {
                            "application": [
                                "Traducir los hallazgos técnicos operativos de jobs e interfaces a riesgos de negocio comprensibles.",
                                "Colaborar con la gerencia para desarrollar recomendaciones realistas y eficientes para la capa de aplicación.",
                                "Asegurar que los planes de acción operativos tengan responsables y fechas límite claras para la capa de aplicación."
                            ],
                            "operating_system": [
                                "Traducir los hallazgos técnicos operativos de respaldos y configuraciones de SO a riesgos de negocio comprensibles.",
                                "Colaborar con la gerencia para desarrollar recomendaciones realistas y eficientes para la capa de SO.",
                                "Asegurar que los planes de acción operativos tengan responsables y fechas límite claras para la capa de SO."
                            ],
                            "network": [
                                "Traducir los hallazgos técnicos operativos de configuraciones de red a riesgos de negocio comprensibles.",
                                "Colaborar con la gerencia para desarrollar recomendaciones realistas y eficientes para la capa de red.",
                                "Asegurar que los planes de acción operativos tengan responsables y fechas límite claras para la capa de red."
                            ]
                        }
                    }
                },
                "seguimiento": {
                    title: "6. Seguimiento",
                    description: "Mi fase final es crucial para asegurar que las recomendaciones de auditoría se implementen efectivamente y que los riesgos identificados sean mitigados de forma sostenible.",
                    areas: {
                        "access": {
                            "application": [
                                "Monitorear el progreso de la implementación de los planes de acción de acceso en aplicaciones/BD.",
                                "Realizar pruebas de seguimiento para verificar la efectividad de las acciones correctivas implementadas en la capa de aplicación.",
                                "Documentar la resolución de los hallazgos y el impacto en el perfil de riesgo de acceso en aplicaciones/BD."
                            ],
                            "operating_system": [
                                "Monitorear el progreso de la implementación de los planes de acción de acceso en SO.",
                                "Realizar pruebas de seguimiento para verificar la efectividad de las acciones correctivas implementadas en la capa de SO.",
                                "Documentar la resolución de los hallazgos y el impacto en el perfil de riesgo de acceso en SO."
                            ],
                            "network": [
                                "Monitorear el progreso de la implementación de los planes de acción de acceso en red.",
                                "Realizar pruebas de seguimiento para verificar la efectividad de las acciones correctivas implementadas en la capa de red.",
                                "Documentar la resolución de los hallazgos y el impacto en el perfil de riesgo de acceso en red."
                            ]
                        },
                        "changes": {
                            "application": [
                                "Verificar la implementación de las recomendaciones de cambios en aplicaciones/BD/interfaces y su impacto en el proceso.",
                                "Realizar pruebas de seguimiento sobre los controles mejorados para asegurar su efectividad en la capa de aplicación.",
                                "Confirmar que la documentación de las acciones correctivas está completa y actualizada para cambios en aplicaciones."
                            ],
                            "operating_system": [
                                "Verificar la implementación de las recomendaciones de cambios en sistemas operativos y su impacto en el proceso.",
                                "Realizar pruebas de seguimiento sobre los controles mejorados para asegurar su efectividad en la capa de SO.",
                                "Confirmar que la documentación de las acciones correctivas está completa y actualizada para cambios en SO."
                            ],
                            "network": [
                                "Verificar la implementación de las recomendaciones de cambios en redes y su impacto en el proceso.",
                                "Realizar pruebas de seguimiento sobre los controles mejorados para asegurar su efectividad en la capa de red.",
                                "Confirmar que la documentación de las acciones correctivas está completa y actualizada para cambios en red."
                            ]
                        },
                        "operations": {
                            "application": [
                                "Monitorear las métricas de éxito de ejecución de jobs y la resolución de fallos en la capa de aplicación.",
                                "Verificar la precisión y exactitud de la transmisión de datos a través de las interfaces clave mediante conciliaciones y muestreos post-acción."
                            ],
                            "operating_system": [
                                "Realizar pruebas de restauración de respaldos de forma recurrente para validar la efectividad de la gestión en la capa de SO.",
                                "Monitorear las métricas de cumplimiento de parches y configuraciones de seguridad en SO."
                            ],
                            "network": [
                                "Monitorear las métricas de disponibilidad y rendimiento de red post-implementación de acciones correctivas.",
                                "Realizar pruebas de seguridad de red de forma recurrente para validar la efectividad de la gestión de configuraciones."
                            ]
                        }
                    }
                }
            };

            const phaseButtons = document.querySelectorAll('.phase-button');
            const tabButtons = document.querySelectorAll('.tab-button');
            const phaseTitle = document.getElementById('phase-title');
            const phaseDescription = document.getElementById('phase-description');
            const areaContentContainer = document.getElementById('area-content-container');

            let currentPhase = 'planeacion'; // Default phase
            let currentArea = 'access';     // Default area

            function updateContent() {
                const phaseData = auditGuideData[currentPhase];
                const areaDataApproach = phaseData.areas[currentArea]; // Approach data for current area and phase

                phaseTitle.textContent = phaseData.title;
                phaseDescription.textContent = phaseData.description;

                // Define technology layers
                const technologyLayers = ["application", "operating_system", "network"];

                // Clear all risk and approach Uls for the current area across all layers
                technologyLayers.forEach(layer => {
                    const risksUl = document.getElementById(`${currentArea}-${layer}-risks`);
                    const approachUl = document.getElementById(`${currentArea}-${layer}-approach`);
                    if (risksUl) risksUl.innerHTML = '';
                    if (approachUl) approachUl.innerHTML = '';
                });

                // Get the main risk detail display for the current area
                const riskDetailDisplay = document.getElementById(`risk-detail-display-${currentArea}`);
                riskDetailDisplay.innerHTML = 'Haz clic en un riesgo para ver más detalles y ejemplos.';
                riskDetailDisplay.classList.add('italic'); // Reset italic state

                // Populate risks and approaches for each technology layer within the current area
                technologyLayers.forEach(layer => {
                    const risksUl = document.getElementById(`${currentArea}-${layer}-risks`);
                    const approachUl = document.getElementById(`${currentArea}-${layer}-approach`);

                    if (risksUl && staticRisksData[currentArea] && staticRisksData[currentArea][layer]) {
                        staticRisksData[currentArea][layer].forEach((risk, index) => {
                            const li = document.createElement('li');
                            li.className = 'flex items-start risk-item';
                            li.innerHTML = `<span class="text-red-500 mr-2 mt-1">✗</span><span>${risk.title}</span>`;
                            // Store enough info to retrieve detail later
                            li.dataset.area = currentArea;
                            li.dataset.layer = layer;
                            li.dataset.riskIndex = index;

                            li.addEventListener('click', (event) => {
                                // Remove 'selected' class from all risk items in ALL layers for the current area
                                technologyLayers.forEach(l => {
                                    const ul = document.getElementById(`${currentArea}-${l}-risks`);
                                    if (ul) {
                                        ul.querySelectorAll('.risk-item').forEach(item => {
                                            item.classList.remove('selected');
                                        });
                                    }
                                });
                                event.currentTarget.classList.add('selected');

                                const clickedArea = event.currentTarget.dataset.area;
                                const clickedLayer = event.currentTarget.dataset.layer;
                                const clickedIndex = event.currentTarget.dataset.riskIndex;

                                riskDetailDisplay.textContent = staticRisksData[clickedArea][clickedLayer][clickedIndex].detail;
                                riskDetailDisplay.classList.remove('italic');
                            });
                            risksUl.appendChild(li);
                        });
                    }

                    // Populate approach from dynamic auditGuideData
                    if (approachUl && areaDataApproach[layer]) { // Check if approach data exists for this layer in the current phase/area
                        areaDataApproach[layer].forEach(item => {
                            const li = document.createElement('li');
                            li.className = 'flex items-start';
                            li.innerHTML = `<span class="text-violet-500 mr-2 mt-1">✓</span><span>${item}</span>`;
                            approachUl.appendChild(li);
                        });
                    }
                });

                // Show/hide correct area content (main tabs)
                document.querySelectorAll('.area-content').forEach(content => {
                    if (content.id === `${currentArea}-content`) {
                        content.classList.remove('hidden');
                    } else {
                        content.classList.add('hidden');
                    }
                });
            }

            // Event listeners for methodology phase buttons
            phaseButtons.forEach(button => {
                button.addEventListener('click', () => {
                    phaseButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    currentPhase = button.dataset.phase;
                    updateContent();
                });
            });

            // Event listeners for area tab buttons
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    currentArea = button.dataset.tab;
                    updateContent();
                });
            });

            // Initial load of content
            updateContent();

            // Mobile navigation (simplified as there's only one main section)
            const mobileNav = document.getElementById('mobile-nav');
            mobileNav.addEventListener('change', (e) => {
                window.location.hash = e.target.value;
            });
        });
    </script>
</body>
</html>
<!DOCTYPE html>
